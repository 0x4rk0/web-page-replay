<html>
  <head>
  <title>Chromium Perf Tracker</title>
  <link rel="stylesheet" href="styles/style.css">
  <script src="scripts/util.js"></script>
  <script src="jst/util.js" type="text/javascript"></script>
  <script src="jst/jsevalcontext.js" type="text/javascript"></script>
  <script src="jst/jstemplate.js" type="text/javascript"></script>
  </head>

  <body onLoad="loadData()">
    <h1><div id="header">Chromium Page Tracker View Test Set</div></h1>

    <script>
    function loadData() {
      var url = "/json?type=set";
      var set_id = location.queryString()["id"];
      if (set_id == undefined) {
        alert("missing set_id");
        return;
      }
      url += "&id=" + set_id;

      new XHRGet(url, function(result) {
        data = JSON.parse(result);
        var context = new JsEvalContext(data);
        var template = document.getElementById("template");
        jstProcess(context, template);
      });
    }
    </script>

    <div id="template">
      <div jsselect="obj">
      <div class="scorebox">
        <span jsdisplay="total_time != undefined" jscontent="total_time + 'ms'"></span>
        <span jsdisplay="total_time == undefined">Test not complete</span>
      </div>
      <table class="sortable">
      <tr><td>Id</td> <td jscontent="key"></td></tr>
      <tr><td>Client</td> <td jscontent="client_hostname"></td></tr>
      <tr><td>User</td> <td jscontent="user.email"></td></tr>
      <tr><td>Date</td> <td jscontent="date"></td></tr>
      <tr><td>Notes</td> <td jscontent="notes"></td></tr>
      <tr><td>Version</td> <td jscontent="data.version.version"></td></tr>
      <tr><td>Platform</td> <td jscontent="platform"></td></tr>
      <tr><td>Command Line</td> <td jscontent="cmdline"></td></tr>
      <tr><td>Network</td> <td jscontent="data.network.network_type"></td></tr>
      <tr><td># of URLS</td> <td jscontent="url_count"></td></tr>
      <tr><td># of Iterations</td> <td jscontent="iterations"></td></tr>
      <tr><td>Start Load Time</td><td jscontent="start_load_time"></td></tr>
      <tr><td>Commit Load Time</td><td jscontent="commit_load_time"></td></tr>
      <tr><td>Doc Load Time</td><td jscontent="doc_load_time"></td></tr>
      <tr><td>Paint Time</td><td jscontent="paint_time"></td></tr>
      <tr><td>Total Time</td><td jscontent="total_time"></td></tr>
      <tr><td>Last Load Time</td><td jscontent="last_load_time"></td></tr>
      </table>
      </div>

      <table class="sortable">
      <tr>
        <th>Date</th>
        <th>URL</th>
        <th>Iterations</th>
        <th>Start</th>
        <th>Commit</th>
        <th>Doc</th>
        <th>Paint</th>
        <th>PLT</th>
        <th>LLT</th>
        <th>stddev</th>
        <th>stderr</th>
        <th>ci</th>
      </tr>
        <tr jsselect="summaries">
        <td><span jseval="$val = '/do_view_summary?id=' + key"></span><a jsvalues="href:$val" jscontent="date"></a></td>
        <td><span jscontent="url"></span></td>
        <td class="righttext" jscontent="iterations"></td>
        <td class="righttext" jscontent="start_load_time"></td>
        <td class="righttext" jscontent="commit_load_time"></td>
        <td class="righttext" jscontent="doc_load_time"></td>
        <td class="righttext" jscontent="paint_time"></td>
        <td class="righttext" jscontent="total_time"></td>
        <td class="righttext" jscontent="last_load_time"></td>
        <td class="righttext" jseval="val = total_time_stddev.toFixed(1)" jscontent="val"></td>
        <td class="righttext" jseval="$stderr = stderr(total_time_stddev, iterations).toFixed(1)" jscontent="$stderr"></td>
        <td class="righttext" jseval="$ci = ci($stderr); $lo=total_time - $ci; $hi=total_time + $ci; val=$lo.toFixed(1) + ' - ' + $hi.toFixed(1)" jscontent="val"></td>
      </table>
    </div>
  </body>
</html>
